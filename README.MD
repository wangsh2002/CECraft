# CECraft - æ™ºèƒ½ç®€å†ä¼˜åŒ–ç³»ç»Ÿ

CECraft æ˜¯ä¸€ä¸ªé›†æˆäº† AI æ™ºèƒ½ä½“çš„ç°ä»£åŒ–ç®€å†ç¼–è¾‘å™¨ã€‚å®ƒç»“åˆäº†å¼ºå¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘èƒ½åŠ›ï¼ˆFrontendï¼‰å’ŒåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä»£ç†ï¼ˆBackendï¼‰ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è°ƒç ”å²—ä½è¦æ±‚ã€å’¨è¯¢ç®€å†å»ºè®®ï¼Œå¹¶è‡ªåŠ¨ä¼˜åŒ–å’Œæ¶¦è‰²ç®€å†å†…å®¹ã€‚

## æ ¸å¿ƒåŠŸèƒ½

*   **æ™ºèƒ½ç®€å†è¯Šæ–­ä¸ä¼˜åŒ–**ï¼š
    *   **è°ƒç ”å’¨è¯¢ (Research Consult)**ï¼šæŸ¥è¯¢è–ªèµ„èŒƒå›´ã€é¢è¯•é¢˜ã€å…¬å¸èƒŒæ™¯ç­‰å¤–éƒ¨ä¿¡æ¯ã€‚
    *   **è°ƒç ”ä¿®æ”¹ (Research Modify)**ï¼šæ ¹æ®æœç´¢åˆ°çš„å²—ä½ JD æˆ–è¡Œä¸šæ ‡å‡†ï¼Œé’ˆå¯¹æ€§åœ°ä¼˜åŒ–ç®€å†æŠ€èƒ½å’Œç»å†ã€‚
    *   **ç›´æ¥ä¿®æ”¹ (Modify)**ï¼šå¯¹ç®€å†å†…å®¹è¿›è¡Œæ¶¦è‰²ã€ç²¾ç®€ã€ç¿»è¯‘æˆ–çº é”™ã€‚
    *   **é—²èŠ (Chat)**ï¼šæä¾›é€šç”¨çš„ç®€å†å»ºè®®å’ŒæŒ‡å¯¼ã€‚
*   **ä¸“ä¸šçº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**ï¼š
    *   åŸºäº Canvas çš„é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“ã€‚
    *   æ”¯æŒå¯Œæ–‡æœ¬æ•°æ®ç»“æ„ (Delta)ã€‚
    *   æ¨¡å—åŒ–æ’ä»¶ç³»ç»Ÿã€‚
*   **RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) - æ·±åº¦ä¼˜åŒ–ç‰ˆ**ï¼š
    *   **Two-stage Retrieval (ä¸¤é˜¶æ®µæ£€ç´¢)**ï¼š
        *   **Query Expansion (æŸ¥è¯¢æ‰©å±•)**ï¼šåˆ©ç”¨ LLM ç”Ÿæˆå¤šè·¯å­æŸ¥è¯¢ï¼Œæå‡å¬å›è¦†ç›–ç‡ (Recall)ã€‚
        *   **Rerank (é‡æ’åº)**ï¼šå¼•å…¥ Cross-Encoder æ¨¡å‹å¯¹å‘é‡å¬å›ç»“æœè¿›è¡Œç²¾æ’ï¼Œå¤§å¹…æå‡ Top-K å‡†ç¡®ç‡ã€‚
    *   **Advanced Indexing (é«˜çº§ç´¢å¼•ç­–ç•¥)**ï¼š
        *   **Structure-aware Chunking (ç»“æ„åŒ–åˆ‡åˆ†)**ï¼šåŸºäº Markdown AST è§£ææ–‡æ¡£ç»“æ„ï¼Œç¡®ä¿çŸ¥è¯†ç‰‡æ®µçš„è¯­ä¹‰å®Œæ•´æ€§ã€‚
        *   **Parent-Child Indexing (çˆ¶å­ç´¢å¼•)**ï¼šSmall-to-Big ç­–ç•¥ï¼Œæ£€ç´¢ç»†ç²’åº¦å­å—ï¼Œè¿”å›ç²—ç²’åº¦çˆ¶æ–‡æ¡£ï¼Œå…¼é¡¾æ£€ç´¢ç²¾åº¦ä¸ä¸Šä¸‹æ–‡å®Œæ•´æ€§ã€‚
    *   **Evaluation (è‡ªåŠ¨åŒ–è¯„ä¼°)**ï¼šå†…ç½® RAG è¯„ä¼°æµæ°´çº¿ï¼Œé‡åŒ– Context Recall å’Œ Answer Faithfulness æŒ‡æ ‡ã€‚

## ğŸ“Š ç³»ç»Ÿè¯„ä¼°ä¸é‡åŒ–æˆæœ (Benchmark)

æœ¬é¡¹ç›®æ„å»ºäº†åŒ…å« 50+ çœŸå®åœºæ™¯çš„è‡ªåŠ¨åŒ–è¯„æµ‹é›†ï¼Œé‡‡ç”¨ **LLM-as-a-Judge** æœºåˆ¶å¯¹ç³»ç»Ÿè¿›è¡Œå…¨æ–¹ä½è¯„ä¼°ã€‚å®éªŒæ•°æ®è¡¨æ˜ï¼Œç›¸æ¯”é€šç”¨å¤§æ¨¡å‹ (Baseline)ï¼Œæœ¬ç³»ç»Ÿåœ¨ä¸“ä¸šåº¦ã€å‡†ç¡®æ€§å’Œä¸šåŠ¡ä»·å€¼ä¸Šå‡æœ‰æ˜¾è‘—æå‡ã€‚

### 1. æ ¸å¿ƒä¸šåŠ¡ä»·å€¼ (Business Value)
*   **STAR æ³•åˆ™ç¬¦åˆåº¦æå‡**: **+162.5%** ğŸš€
    *   *è¯´æ˜ç³»ç»Ÿèƒ½æœ‰æ•ˆå°†æµæ°´è´¦å¼çš„ç»å†é‡å†™ä¸ºç¬¦åˆ STAR åŸåˆ™ï¼ˆæƒ…å¢ƒ-ä»»åŠ¡-è¡ŒåŠ¨-ç»“æœï¼‰çš„ä¸“ä¸šæè¿°ã€‚*
*   **ç®€å†è´¨é‡è¯„åˆ†æå‡**: **+27.5 åˆ†** (57.5 -> 85.0)
    *   *ä»ä¸åŠæ ¼æ°´å¹³æå‡è‡³ä¼˜ç§€æ°´å¹³ï¼Œæ˜¾è‘—å¢åŠ äº†ç®€å†é€šè¿‡ç­›é€‰çš„æ¦‚ç‡ã€‚*

### 2. RAG æ£€ç´¢æ€§èƒ½ (Retrieval Performance)
*   **Context Recall (å¬å›ç‡)**: **0.75**
    *   *åœ¨æµ·é‡æ–‡æ¡£ä¸­å‡†ç¡®å¬å›ç›¸å…³çŸ¥è¯†çš„èƒ½åŠ›ã€‚*
*   **Faithfulness (å¿ å®åº¦)**: **0.90**
    *   *ç”Ÿæˆå†…å®¹ä¸¥æ ¼åŸºäºæ£€ç´¢åˆ°çš„äº‹å®ï¼Œæœ‰æ•ˆæŠ‘åˆ¶äº†å¤§æ¨¡å‹çš„å¹»è§‰é—®é¢˜ã€‚*
*   **Answer Relevance (ç›¸å…³æ€§)**: **0.95**
    *   *å›ç­”é«˜åº¦åˆ‡é¢˜ï¼Œç²¾å‡†æ»¡è¶³ç”¨æˆ·ä¿®æ”¹éœ€æ±‚ã€‚*

### 3. ç³»ç»Ÿå·¥ç¨‹æ€§èƒ½ (Engineering)
*   **Win Rate (èƒœç‡)**: **100%** (vs Zero-shot LLM)
    *   *åœ¨ç›²æµ‹ä¸­ï¼Œæœ¬ç³»ç»Ÿçš„è¾“å‡ºç»“æœåœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸­å‡ä¼˜äºæˆ–æŒå¹³äºåŸºå‡†æ¨¡å‹ã€‚*
*   **Intent Accuracy (æ„å›¾è¯†åˆ«)**: **100%**
    *   *Supervisor è·¯ç”±æ¨¡å—èƒ½ç²¾å‡†è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼ˆå’¨è¯¢/ä¿®æ”¹/é—²èŠï¼‰ã€‚*
*   **End-to-End Latency**: **5.50s**
    *   *åœ¨ä¿è¯å¤šæ­¥æ¨ç†å’Œæ£€ç´¢è´¨é‡çš„å‰æä¸‹ï¼Œä¿æŒäº†è‰¯å¥½çš„äº¤äº’å“åº”é€Ÿåº¦ã€‚*

> *æ³¨ï¼šä»¥ä¸Šæ•°æ®åŸºäº `backend/evaluation/run_benchmark.py` åœ¨å†…éƒ¨æµ‹è¯•é›†ä¸Šçš„è¿è¡Œç»“æœã€‚*

## æ¨¡å—è¯´æ˜

### Backend (åç«¯)

åç«¯åŸºäº **FastAPI** å’Œ **LangChain** æ„å»ºï¼Œè´Ÿè´£å¤„ç† AI é€»è¾‘ã€æ•°æ®æ£€ç´¢å’Œ API æœåŠ¡ã€‚

*   **Agent Workflow**: é‡‡ç”¨ Supervisor æ¶æ„ï¼Œå°†ç”¨æˆ·æ„å›¾åˆ†ç±»ä¸º `research_consult`, `research_modify`, `modify`, `chat` å››ç±»ï¼Œå¹¶è°ƒåº¦ç›¸åº”çš„å·¥å…·ã€‚
*   **RAG System**: ä½¿ç”¨ Milvus ä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œå­˜å‚¨çˆ¬å–çš„è¡Œä¸šæ•°æ®ï¼Œä¸º Agent æä¾›ä¸Šä¸‹æ–‡æ”¯æŒã€‚
*   **Tools**: é›†æˆäº† Web Search (è”ç½‘æœç´¢) å’Œ RAG Retriever (æœ¬åœ°çŸ¥è¯†åº“æ£€ç´¢) å·¥å…·ã€‚

### Frontend (å‰ç«¯)

å‰ç«¯é‡‡ç”¨ **React** + **Rspack** çš„ Monorepo æ¶æ„ï¼Œæ ¸å¿ƒæ˜¯ä¸€ä¸ªè‡ªç ”çš„å¯Œæ–‡æœ¬/å›¾å½¢ç¼–è¾‘å™¨å¼•æ“ã€‚

*   **Core**: ç¼–è¾‘å™¨çš„æ ¸å¿ƒå¼•æ“ï¼Œå¤„ç†ç”»å¸ƒæ¸²æŸ“ã€äº‹ä»¶åˆ†å‘ã€å†å²è®°å½•ç®¡ç†ç­‰ã€‚
*   **Delta**: å®šä¹‰äº†æ–‡æ¡£çš„æ•°æ®ç»“æ„ï¼Œç”¨äºæè¿°å¯Œæ–‡æœ¬å†…å®¹ã€‚
*   **Plugin**: æ’ä»¶ç³»ç»Ÿï¼Œå…è®¸æ‰©å±•ç¼–è¾‘å™¨åŠŸèƒ½ã€‚
*   **React**: UI å±‚ï¼Œä½¿ç”¨ Arco Design ç»„ä»¶åº“ï¼Œæä¾›ç”¨æˆ·äº¤äº’ç•Œé¢ã€‚

## é¡¹ç›®ç»“æ„ä¸æ–‡ä»¶è¯´æ˜

```text
CECraft/
â”œâ”€â”€ README.MD                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ run.sh                      # ä¸€é”®å¯åŠ¨è„šæœ¬ (åŒæ—¶å¯åŠ¨å‰åç«¯)
â”œâ”€â”€ technical_report.md         # æŠ€æœ¯æŠ¥å‘Š
â”œâ”€â”€ backend/                    # åç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.py                 # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ crawl_docs.py           # æ•°æ®çˆ¬è™«è„šæœ¬ï¼Œç”¨äºæŠ“å–ç®€å†èŒƒæ–‡å’Œå²—ä½ JD
â”‚   â”œâ”€â”€ ingest_rag.py           # RAG æ•°æ®å…¥åº“è„šæœ¬ï¼Œå°† Markdown æ–‡æ¡£å­˜å…¥ Milvus
â”‚   â”œâ”€â”€ docker-compose.yml      # åŸºç¡€è®¾æ–½ç¼–æ’ (Milvus, MinIO, Etcd)
â”‚   â”œâ”€â”€ requirements.txt        # Python ä¾èµ–åˆ—è¡¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â””â”€â”€ agent.py    # Agent ç›¸å…³ API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ config.py       # é¡¹ç›®é…ç½® (ç¯å¢ƒå˜é‡ç­‰)
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â””â”€â”€ agent.py        # Pydantic æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ agent_workflow.py # LangChain Agent æ ¸å¿ƒå·¥ä½œæµé€»è¾‘ (Supervisor & Tools)
â”‚   â”‚       â””â”€â”€ tools/
â”‚   â”‚           â”œâ”€â”€ rag_retriever.py # RAG æ£€ç´¢å·¥å…·
â”‚   â”‚           â””â”€â”€ web_search.py    # è”ç½‘æœç´¢å·¥å…·
â”‚   â”œâ”€â”€ data/                   # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”‚   â”œâ”€â”€ STARæ³•åˆ™.md          # å†…ç½®å‚è€ƒæ–‡æ¡£
â”‚   â”‚   â””â”€â”€ resumes_crawled/    # çˆ¬è™«æŠ“å–çš„ç®€å†å’Œ JD æ•°æ®
â”‚   â”œâ”€â”€ tests/                  # æµ‹è¯•ä»£ç 
â”‚   â””â”€â”€ volumes/                # Docker æŒ‚è½½å· (Milvus æ•°æ®æŒä¹…åŒ–)
â””â”€â”€ frontend/                   # å‰ç«¯ä»£ç ç›®å½• (Monorepo)
    â”œâ”€â”€ package.json            # æ ¹ä¾èµ–é…ç½®
    â”œâ”€â”€ pnpm-workspace.yaml     # pnpm workspace é…ç½®
    â”œâ”€â”€ packages/
    â”‚   â”œâ”€â”€ core/               # ç¼–è¾‘å™¨æ ¸å¿ƒå¼•æ“åŒ…
    â”‚   â”‚   â””â”€â”€ src/
    â”‚   â”‚       â”œâ”€â”€ canvas/     # ç”»å¸ƒæ¸²æŸ“é€»è¾‘
    â”‚   â”‚       â”œâ”€â”€ editor/     # ç¼–è¾‘å™¨ä¸»æ§é€»è¾‘
    â”‚   â”‚       â”œâ”€â”€ event/      # äº‹ä»¶ç³»ç»Ÿ
    â”‚   â”‚       â””â”€â”€ history/    # æ’¤é”€/é‡åšå†å²è®°å½•
    â”‚   â”œâ”€â”€ delta/              # æ•°æ®ç»“æ„åŒ… (ç±»ä¼¼ Quill Delta)
    â”‚   â”œâ”€â”€ plugin/             # ç¼–è¾‘å™¨æ’ä»¶ç³»ç»Ÿ
    â”‚   â”œâ”€â”€ react/              # React UI åº”ç”¨åŒ… (ä¸»åº”ç”¨)
    â”‚   â”‚   â”œâ”€â”€ rspack.config.js # Rspack æ„å»ºé…ç½®
    â”‚   â”‚   â””â”€â”€ src/            # å‰ç«¯é¡µé¢æºç 
    â”‚   â””â”€â”€ utils/              # é€šç”¨å·¥å…·å‡½æ•°åŒ…
    â””â”€â”€ ...
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

*   Node.js & pnpm
*   Python 3.10+
*   Docker & Docker Compose (ç”¨äºè¿è¡Œ Milvus)

### 1. å¯åŠ¨åŸºç¡€è®¾æ–½

é¦–å…ˆå¯åŠ¨å‘é‡æ•°æ®åº“ Milvus å’Œå¯¹è±¡å­˜å‚¨ MinIOï¼š

```bash
cd backend
docker-compose up -d
```

### 2. æ•°æ®å‡†å¤‡ (å¯é€‰)

å¦‚æœä½ éœ€è¦ä½¿ç”¨ RAG åŠŸèƒ½ï¼Œå¯ä»¥å…ˆçˆ¬å–æ•°æ®å¹¶å…¥åº“ï¼š

```bash
# çˆ¬å–æ•°æ®
python crawl_docs.py

# æ•°æ®å…¥åº“ (éœ€ç¡®ä¿ Docker æœåŠ¡å·²å¯åŠ¨)
python ingest_rag.py --source ./data/resumes_crawled --collection docs_md
```

### 3. å¯åŠ¨æœåŠ¡

ä½ å¯ä»¥ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„è„šæœ¬åŒæ—¶å¯åŠ¨å‰åç«¯ï¼š

```bash
./run.sh
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨ï¼š

**Backend:**

```bash
cd backend
pip install -r requirements.txt
python main.py
```

**Frontend:**

```bash
cd frontend
pnpm install
pnpm dev
```

è®¿é—®å‰ç«¯åœ°å€é€šå¸¸ä¸º: `http://localhost:8080` (å…·ä½“è§†æ§åˆ¶å°è¾“å‡ºè€Œå®š)ã€‚
API æ–‡æ¡£åœ°å€: `http://localhost:8000/docs`ã€‚
